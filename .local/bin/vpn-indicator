#!/usr/bin/env bash

icon=""
tooltip=""
class=""

# Check Tailscale status
if command -v tailscale &>/dev/null; then
    if tailscale status --json 2>/dev/null | grep -q '"BackendState".*:.*"Running"'; then
        icon="up 󰒙"
        tooltip="Tailscale connected"
        class="vpn-on"
    else
        icon="down 󰦜"
        tooltip="Tailscale disconnected"
        class="vpn-off"
    fi
else
    icon="unkown 󰦜"
    tooltip="Tailscale not found"
    class="vpn-off"
fi

echo "{\"text\": \"$icon\", \"tooltip\": \"$tooltip\", \"class\": \"$class\"}"
