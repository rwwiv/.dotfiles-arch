#!/bin/bash

# TODO: add notification indicator (󰅸) in normal mode

icon=""
tooltip=""
class=""

# ensure pw-metadata follows mako state
if makoctl mode | grep -q 'do-not-disturb'; then
    pw-metadata -n default 0 dnd-mode true &>/dev/null
    icon="󰪑"
    tooltip="Focus mode on"
    class="dnd-on"
else
    pw-metadata -n default 0 dnd-mode false &>/dev/null
    icon="󰂜"
    tooltip="Focus mode off"
    class="dnd-off"
fi

echo "{\"text\": \"$icon\", \"tooltip\": \"$tooltip\", \"class\": \"$class\"}"
